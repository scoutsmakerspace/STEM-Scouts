{% assign items = include.items %}

{% if items and items.size > 0 %}
  <div class="activity-index" role="list">
    {% for p in items %}
      <article class="activity-index__item" role="listitem">
        <h3 class="activity-index__title">
          <a href="{{ p.url | relative_url }}">{{ p.title }}</a>
        </h3>

        <div class="activity-index__meta">
          {% if p.programme_type %}
            <span class="meta-chip">
              {% if p.programme_type == "scouts" %}
                Scouts partnership
              {% else %}
                Wider youth STEM programme
              {% endif %}
            </span>
          {% endif %}

          {% if p.sections and p.sections.size > 0 %}
            <span class="meta-chip">
              Sections:
              {% for s in p.sections %}
                {{ s | downcase | capitalize }}{% unless forloop.last %}, {% endunless %}
              {% endfor %}
            </span>
          {% endif %}

          {% if p.partner_name %}
            <span class="meta-chip">Partner: {{ p.partner_name }}</span>
          {% endif %}

          {% if p.official_url %}
            <span class="meta-chip"><a href="{{ p.official_url }}" target="_blank" rel="noopener">Official link</a></span>
          {% endif %}

          {% if p.status %}
            <span class="meta-chip">Status: {{ p.status }}</span>
          {% endif %}

          {% if p.last_checked %}
            <span class="meta-chip">Checked: {{ p.last_checked }}</span>
          {% endif %}
        </div>

        {% if p.summary %}
          <p class="activity-index__summary">{{ p.summary }}</p>
        {% endif %}

        {% if p.content and p.content != "" %}
          <div class="activity-muted" style="margin-top:.35rem;">
            {{ p.content }}
          </div>
        {% endif %}
      </article>
    {% endfor %}
  </div>
{% else %}
  <p class="activity-muted">(Nothing listed yet)</p>
{% endif %}