---
layout: single
toc: true
toc_label: "On this page"
toc_sticky: true
---

{% assign a = page %}
{% comment %}Allowed badges (filtered via badges_master.json){% endcomment %}
{% assign allowed_badge_ids = "" %}
{% for _b in site.data.badges_master %}{% assign allowed_badge_ids = allowed_badge_ids | append: _b.id | append: "||" %}{% endfor %}


{%- comment -%}
IMPORTANT:
We rely on Minimal Mistakes' *built-in* TOC (sidebar) rather than injecting a custom TOC list.
For the built-in TOC to work reliably, headings must exist in the page content AND have IDs.
So we place the section IDs on the <h3> headings below (not on the <section> wrapper).
{%- endcomment -%}

{% if a.hero_image %}
  <figure class="activity-hero" style="margin: 0 0 1rem 0;">
    <img src="{{ a.hero_image | relative_url }}" alt="{{ a.title | escape }}" style="width:100%; border-radius:12px;">
  </figure>
{% endif %}

<section class="activity-card">
  <h3 class="activity-card__title">At a glance</h3>

  {% if a.summary %}
    <p class="activity-muted" style="margin-top:-.25rem;">{{ a.summary }}</p>
  {% endif %}

  <ul class="activity-glance">
    {% if a.sections %}
      <li><strong>Sections:</strong>
        {% for s in a.sections %}
          {{ s | downcase | capitalize }}{% unless forloop.last %}, {% endunless %}
        {% endfor %}
      </li>
    {% endif %}
    {% if a.difficulty %}<li><strong>Difficulty:</strong> {{ a.difficulty }}/5</li>{% endif %}
    {% if a.time_minutes %}<li><strong>Time:</strong> {{ a.time_minutes }} min</li>{% endif %}
    {% if a.supervision %}<li><strong>Supervision:</strong> {{ a.supervision }}</li>{% endif %}
    {% if a.location %}<li><strong>Location:</strong> {{ a.location }}</li>{% endif %}
    {% if a.type %}<li><strong>Type:</strong> {{ a.type }}</li>{% endif %}
    {% if a.group_size %}<li><strong>Group size:</strong> {{ a.group_size }}</li>{% endif %}
    {% if a.setup_notes %}<li><strong>Setup notes:</strong> {{ a.setup_notes }}</li>{% endif %}
  </ul>

  <div class="activity-ra" style="margin-top:.5rem;">
    <strong>Risk assessment:</strong>
    {% assign match = nil %}

    {% if a.resources and a.resources.risk_assessment %}
      {% for ra in site.risk_assessments %}
        {% if ra.slug == a.resources.risk_assessment %}
          {% assign match = ra %}
          {% break %}
        {% endif %}
      {% endfor %}
    {% endif %}

    {% if match %}
      <a href="{{ match.url | relative_url }}">{{ match.title }}</a>
      <p class="activity-warning" style="margin-top:.5rem;">
        This is an example Risk Assessment. Leaders must review and create their own version for their activity.
      </p>
    {% else %}
      <span class="activity-warning" style="margin-top:.5rem; display:inline-block;">
        No Risk Assessment linked yet — create and link one before running this activity.
      </span>
    {% endif %}
  </div>
</section>

{% if a.kit_list %}
<section class="activity-card">
  <h3 class="activity-card__title" id="kit">You will need</h3>
  {{ a.kit_list | markdownify }}
</section>
{% endif %}

{% if a.learning_goals and a.learning_goals.size > 0 %}
<section class="activity-card">
  <h3 class="activity-card__title" id="goals">Learning goals</h3>
  <ul>
    {% for g in a.learning_goals %}
      <li>{% if g.goal %}{{ g.goal }}{% else %}{{ g }}{% endif %}</li>
    {% endfor %}
  </ul>
</section>
{% endif %}

{% if a.leader and a.leader.prep %}
<section class="activity-card">
  <h3 class="activity-card__title" id="prep">Leader prep (before the meeting)</h3>
  {{ a.leader.prep | markdownify }}
</section>
{% endif %}

{% if a.leader and a.leader.briefing %}
<section class="activity-card">
  <h3 class="activity-card__title" id="briefing">Leader briefing (what to explain first)</h3>
  {{ a.leader.briefing | markdownify }}
</section>
{% endif %}

{% if a.leader and a.leader.safety_brief %}
<section class="activity-card">
  <h3 class="activity-card__title" id="safety">Safety briefing (key points)</h3>
  {{ a.leader.safety_brief | markdownify }}
</section>
{% endif %}

{% if a.running and a.running.steps %}
<section class="activity-card">
  <h3 class="activity-card__title" id="steps">How to run the activity</h3>
  <div class="activity-steps">
    {{ a.running.steps | markdownify }}
  </div>
</section>
{% endif %}

{% if a.running and a.running.differentiation %}
<section class="activity-card">
  <h3 class="activity-card__title" id="diff">Make it easier / harder</h3>
  {{ a.running.differentiation | markdownify }}
</section>
{% endif %}

{% if a.running and a.running.time_plan and a.running.time_plan.size > 0 %}
<section class="activity-card">
  <h3 class="activity-card__title" id="time">Time plan</h3>
  <ul>
    {% for t in a.running.time_plan %}
      <li>
        <strong>{{ t.label }}:</strong> {{ t.minutes }} min
        {% if t.notes %} — {{ t.notes }}{% endif %}
      </li>
    {% endfor %}
  </ul>
</section>
{% endif %}

{% if a.running and a.running.reflection %}
<section class="activity-card">
  <h3 class="activity-card__title" id="reflection">Reflection / questions</h3>
  {{ a.running.reflection | markdownify }}
</section>
{% endif %}

{% if a.resources and a.resources.documents and a.resources.documents.size > 0 %}
<section class="activity-card">
  <h3 class="activity-card__title" id="downloads">Downloads</h3>
  <ul>
    {% for doc in a.resources.documents %}
      <li>
        <a href="{{ doc.file | relative_url }}" target="_blank" rel="noopener noreferrer">{{ doc.title }}</a>
      </li>
    {% endfor %}
  </ul>
</section>
{% endif %}

{% if a.resources and a.resources.external_docs and a.resources.external_docs.size > 0 %}
<section class="activity-card">
  <h3 class="activity-card__title" id="links">External tutorials</h3>
  <ul>
    {% for d in a.resources.external_docs %}
      <li><a href="{{ d.url }}" target="_blank" rel="noopener noreferrer">{{ d.title }}</a></li>
    {% endfor %}
  </ul>
</section>
{% endif %}

{% if a.badges and a.badges.size > 0 %}
<section class="activity-card">
  <h3 class="activity-card__title" id="badges">Badge links (reference)</h3>
  <ul>
    {% for b in a.badges %}
      <li>
        <strong>{{ b.section | downcase | capitalize }}:</strong> {{ b.badge }}
        {% if b.requirement_ref %} — {{ b.requirement_ref }}{% endif %}
        {% if b.url %} (<a href="{{ b.url }}" target="_blank" rel="noopener noreferrer">official link</a>){% endif %}
      </li>
    {% endfor %}
  </ul>
</section>
{% endif %}

{% if a.badge_links and a.badge_links.size > 0 %}
<section class="activity-card">
  <h3 class="activity-card__title" id="badge-requirements">Badges & requirements covered</h3>

  <p class="activity-muted" style="margin-top:-.25rem;">
    These are the badge requirements this activity can help young people complete.
  </p>

  <div class="activity-badges">
    {% for bl in a.badge_links %}
      {% assign bid = bl.badge_id | default: '' %}
{% unless allowed_badge_ids contains bid | append: "||" %}{% continue %}{% endunless %}
      {% if bid != '' %}
        {% assign badge_obj = site.data.badges_master | where: "id", bid | first %}
        {% assign badge_name = bid %}
        {% assign badge_section = '' %}
        {% assign badge_category = '' %}
        {% if badge_obj %}
          {% if badge_obj.badge_name %}{% assign badge_name = badge_obj.badge_name %}{% endif %}
          {% if badge_obj.section %}{% assign badge_section = badge_obj.section %}{% endif %}
          {% if badge_obj.category %}{% assign badge_category = badge_obj.category %}{% endif %}
        {% elsif bl.badge_title %}
          {% assign badge_name = bl.badge_title %}
        {% endif %}

        <div class="activity-badge" style="margin: 0 0 1rem 0;">
          <div class="activity-badge__header" style="font-weight:700; display:flex; align-items:center; gap:8px;">
            <img class="activity-badge__icon" src="{{ '/assets/images/badges/' | append: bid | append: '_64.png' | relative_url }}" alt="" loading="lazy" onerror="this.onerror=null;this.src='{{ '/assets/images/badges/' | append: bid | append: '.png' | relative_url }}'; this.onerror=function(){this.onerror=null;this.src='{{ '/assets/images/badges/_missing.png' | relative_url }}';};">
            <span>{% if badge_section != '' %}{{ badge_section | capitalize }} — {% endif %}{{ badge_name }}
            {% if badge_category != '' %}<span style="font-weight:400; opacity:.85;"> — {{ badge_category }}</span>{% endif %}</span>
          </div>

          {% if badge_obj and bl.requirements_met and bl.requirements_met.size > 0 %}
            {% assign reqs = badge_obj.requirements | where_exp: "r", "r.kind == 'req' or r.kind == nil" %}
            <ul style="margin: .5rem 0 0 1.25rem;">
              {% for rid in bl.requirements_met %}
                {% assign req = reqs | where: "id", rid | first %}
                {% if req and req.text %}
                  <li><strong>{{ rid }}.</strong> {{ req.text }}</li>
                {% else %}
                  <li><strong>{{ rid }}.</strong></li>
                {% endif %}
              {% endfor %}
            </ul>
          {% elsif bl.requirements_met and bl.requirements_met.size > 0 %}
            <p style="margin: .5rem 0 0 0; opacity:.85;">Requirements selected: {{ bl.requirements_met | join: ", " }}</p>
          {% else %}
            <p style="margin: .5rem 0 0 0; opacity:.85;">No specific requirements selected.</p>
          {% endif %}

          {% if bl.notes %}
            <p style="margin: .5rem 0 0 0;"><em>{{ bl.notes }}</em></p>
          {% endif %}
        </div>
      {% endif %}
    {% endfor %}
  </div>
</section>
{% endif %}

{% if content and content != "" %}
<section class="activity-card">
  <h3 class="activity-card__title" id="extra">Extra notes</h3>
  {{ content }}
</section>
{% endif %}
