---
layout: null
permalink: /assets/data/activities_index.json
---
[
{% for a in site.activities %}
  {
    "title": {{ a.title | jsonify }},
    "url": {{ a.url | relative_url | jsonify }},
    "badge_ids": [
      {%- assign _ids = "" | split: "|" -%}

      {%- comment -%}
      Preferred: new field written by the Activities editor (badge_links: [{badge_id, ...}, ...])
      {%- endcomment -%}
      {%- if a.badge_links -%}
        {%- for bl in a.badge_links -%}
          {%- if bl.badge_id and bl.badge_id != "" -%}
            {%- assign _ids = _ids | push: bl.badge_id -%}
          {%- endif -%}
        {%- endfor -%}
      {%- endif -%}

      {%- comment -%}
      Back-compat: legacy badges field (badges: [{badge_id|badge, ...}, ...])
      If badge_id isn't present, we only include values that already look like a slug.
      {%- endcomment -%}
      {%- if a.badges -%}
        {%- for b in a.badges -%}
          {%- if b.badge_id and b.badge_id != "" -%}
            {%- assign _ids = _ids | push: b.badge_id -%}
          {%- elsif b.badge and b.badge != "" and b.badge contains "-" -%}
            {%- assign _ids = _ids | push: b.badge -%}
          {%- endif -%}
        {%- endfor -%}
      {%- endif -%}

      {%- assign _ids = _ids | uniq -%}
      {%- for id in _ids -%}
        {%- unless forloop.first -%},{%- endunless -%}{{ id | jsonify }}
      {%- endfor -%}
    ]
  }{% unless forloop.last %},{% endunless %}
{% endfor %}
]
